---
import { getEntry, getCollection } from "astro:content";

export async function getStaticPaths() {
  const blogEntries = await getCollection("cv");
  return blogEntries.map((entry) => ({
    params: { slug: entry.id },
    props: { entry },
  }));
}

import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Section from "../components/Section.astro";

const { entry } = Astro.props;

const data = await getEntry(entry);
---

<Layout title={data.data.language == "zh" ? " 求职简历" : " Resume"}>
  <main class=`container${data.data.language == "en" ? " english" : ""}`>
    <Header metadata={data.data.metadata} lang={data.data.language} />
    {
      data.data.sections.map((section: Section) => (
        <Section obj={section} lang={data.data.language} />
      ))
    }
  </main>
</Layout>

<style>
  :global(.english .font-kai) {
    @apply italic font-serif;
  }
  :global(.english) {
    @apply font-serif;
  }
</style>
